{% extends 'base.html.twig' %}

{% block title %}{% endblock %}

{% block body %}
    <main class="main">
        <div class="container">
            <div class="layout-full">
                {% include 'blocks/breadcrumbs.html.twig' with {'breadcrumbs': build_news_breadcrumbs('Company news', null)} %}

                <h1 class="main-title">Company News</h1>

                <div class="article-list">
                    {% for item in pagination.items|slice(0, 3) %}
                        <article class="article">
                            <div class="article-image">
                                <img src="{{ asset('uploads/news_preview/' ~ item.preview) }}" alt="{{ item.title }}">
                            </div>

                            <div class="article-info">
                                <h3 class="article-title">
                                    <a class="article-link" href="{{ generate_news_url(item) }}">
                                        {{ item.title }}
                                    </a>
                                </h3>
                                <p class="article-desc">
                                    {{ item.summary|nl2br }}
                                </p>
                                <time class="article-date" datetime="{{ item.createdAt|date('Y.m.d') }}">
                                    {{ item.createdAt|date('d.m.Y') }}
                                </time>
                            </div>
                        </article>
                    {% endfor %}
                </div>

                <div class="article-grid">
                    {% for item in pagination.items|slice(3, 6) %}
                        <article class="article">
                            <div class="article-image">
                                <img src="{{ asset('uploads/news_preview/' ~ item.preview) }}" alt="{{ item.title }}">
                            </div>

                            <div class="article-info">
                                <h3 class="article-title">
                                    <a class="article-link" href="{{ generate_news_url(item) }}">
                                        {{ item.title }}
                                    </a>
                                </h3>
                                <p class="article-desc">
                                    {{ item.summary|nl2br }}
                                </p>
                                <time class="article-date" datetime="{{ item.createdAt|date('Y.m.d') }}">
                                    {{ item.createdAt|date('d.m.Y') }}
                                </time>
                            </div>
                        </article>
                    {% endfor %}
                </div>

                <div class="article-grid article-grid--alt">
                    {% for item in pagination.items|slice(9, 1) %}
                    <article class="article">
                        <div class="article-image">
                            <img src="{{ asset('uploads/news_preview/' ~ item.preview) }}" alt="{{ item.title }}">
                        </div>

                        <div class="article-info">
                            <h3 class="article-title">
                                <a class="article-link" href="{{ generate_news_url(item) }}">
                                    {{ item.title }}
                                </a>
                            </h3>
                            <p class="article-desc">
                                {{ item.summary|nl2br }}
                            </p>
                            <time class="article-date" datetime="{{ item.createdAt|date('Y.m.d') }}">
                                {{ item.createdAt|date('d.m.Y') }}
                            </time>
                        </div>
                    </article>
                    {% endfor %}
                    {% for item in pagination.items|slice(10, 3) %}
                    <article class="article">
                        <div class="article-info">
                            <h3 class="article-title">
                                <a class="article-link" href="{{ generate_news_url(item) }}">
                                    {{ item.title }}
                                </a>
                            </h3>
                            <p class="article-desc">
                                {{ item.summary|nl2br }}
                            </p>
                            <time class="article-date" datetime="{{ item.createdAt|date('Y.m.d') }}">
                                {{ item.createdAt|date('d.m.Y') }}
                            </time>
                        </div>
                    </article>
                    {% endfor %}
                </div>
                {% if pagination.totalPages > 1 %}
                    <nav aria-label="Page navigation">
                        <ul class="pagination">
                            {% set prevPageNum = app.request.get('page') - 1 %}
                            {% if prevPageNum > 0 %}
                                <li class="pagination-item">
                                    <a class="pagination-prev" href="{{ path('app_article_index', {'page' : app.request.get('page') - 1}) }}"></a>
                                </li>
                            {% endif %}
                            {% for i in range(1, pagination.totalPages) %}
                                <li class="pagination-item">
                                    <a class="pagination-link" href="{{ path('app_article_index', {'page': i }) }}">{{ i }}</a>
                                </li>
                            {% endfor %}
                            {% set nextPageNum = app.request.get('page') + 1 %}
                            {% if nextPageNum <= pagination.totalPages %}
                                <li class="pagination-item">
                                    <a class="pagination-next" href="{{ path('app_article_index', {'page' : nextPageNum}) }}"></a>
                                </li>
                            {% endif %}
                        </ul>
                    </nav>
                {% endif %}

            </div>

        </div>
    </main>
{% endblock %}
